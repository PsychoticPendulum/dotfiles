#	i3 Config by PsychicPenguin
#	Last Update July 16 2022

#	|-----------------------|
#	|		Includes		|
#	|-----------------------|

include /home/$USER/.config/i3/colorscheme
include /home/$USER/.config/i3/style

#	|-----------------------|
#	|		Handles  		|
#	|-----------------------|

#	Mod Key
set $mod Mod4
set $alt Mod1
set $altgr Mod2

bindsym $mod+shift+q kill
bindsym $mod+shift+r restart
bindsym $mod+shift+e exec "i3-nagbar -t warning -m 'Do you really want to exit?' -B 'Yes' 'i3-msg exit'"


#	|-----------------------|
#	|		Win Man			|
#	|-----------------------|

#	Focus
bindsym $mod+Right focus right
bindsym $mod+Left focus left
bindsym $mod+Up focus up
bindsym $mod+Down focus down
bindsym $alt+Right focus output right
bindsym $alt+Left focus output left
bindsym $alt+Up focus output up
bindsym $alt+Down focus output down

#	Movement
bindsym $mod+Shift+Right move right
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Down move down

bindsym $alt+$mod+Right move workspace to output right
bindsym $alt+$mod+Left move workspace to output left
bindsym $alt+$mod+Up move workspace to output up
bindsym $alt+$mod+Down move workspace to output down

bindsym $alt+Shift+Right move container to output right
bindsym $alt+Shift+Left move container to output left
bindsym $alt+Shift+Up move container to output up
bindsym $alt+Shift+Down move container to output down

#	Layout
bindsym $mod+v split v
bindsym $mod+h split h

bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split
bindsym $mod+f fullscreen toggle

floating_modifier $mod
bindsym $mod+shift+space floating toggle

#	|-----------------------|
#	|		Workspaces		|
#	|-----------------------|

set $1 1
set $2 2
set $3 3
set $4 4
set $5 5
set $6 6
set $7 7
set $8 8
set $9 9
set $0 10

bindsym $mod+1 exec i3wsmgr-msg ws switch "$1"
bindsym $mod+2 exec i3wsmgr-msg ws switch "$2"
bindsym $mod+3 exec i3wsmgr-msg ws switch "$3"
bindsym $mod+4 exec i3wsmgr-msg ws switch "$4"
bindsym $mod+5 exec i3wsmgr-msg ws switch "$5"
bindsym $mod+6 exec i3wsmgr-msg ws switch "$6"
bindsym $mod+7 exec i3wsmgr-msg ws switch "$7"
bindsym $mod+8 exec i3wsmgr-msg ws switch "$8"
bindsym $mod+9 exec i3wsmgr-msg ws switch "$9"
bindsym $mod+0 exec i3wsmgr-msg ws switch "$0"
bindsym $mod+F1 exec i3wsmgr-msg ws switch "$6"
bindsym $mod+F2 exec i3wsmgr-msg ws switch "$7"
bindsym $mod+F3 exec i3wsmgr-msg ws switch "$8"
bindsym $mod+F4 exec i3wsmgr-msg ws switch "$9"
bindsym $mod+F5 exec i3wsmgr-msg ws switch "$0"

bindsym $mod+shift+1 exec i3wsmgr-msg ws move "$1"
bindsym $mod+shift+2 exec i3wsmgr-msg ws move "$2"
bindsym $mod+shift+3 exec i3wsmgr-msg ws move "$3"
bindsym $mod+shift+4 exec i3wsmgr-msg ws move "$4"
bindsym $mod+shift+5 exec i3wsmgr-msg ws move "$5"
bindsym $mod+shift+6 exec i3wsmgr-msg ws move "$6"
bindsym $mod+shift+7 exec i3wsmgr-msg ws move "$7"
bindsym $mod+shift+8 exec i3wsmgr-msg ws move "$8"
bindsym $mod+shift+9 exec i3wsmgr-msg ws move "$9"
bindsym $mod+shift+0 exec i3wsmgr-msg ws move "$0"
bindsym $mod+shift+F1 exec i3wsmgr-msg ws move "$6"
bindsym $mod+shift+F2 exec i3wsmgr-msg ws move "$7"
bindsym $mod+shift+F3 exec i3wsmgr-msg ws move "$8"
bindsym $mod+shift+F4 exec i3wsmgr-msg ws move "$9"
bindsym $mod+shift+F5 exec i3wsmgr-msg ws move "$0"

bindsym $mod+Tab workspace next_on_output
bindsym $mod+shift+Tab workspace prev_on_output

#	|-----------------------|
#	|		i3wsmgr			|
#	|-----------------------|

# static workspace output pins
workspace 0:$1 output eDP-1
workspace 2000:$2 output DP-1-8

# Subworkspaces
bindsym $altgr+i exec i3wsmgr-msg ws subwsrecords ignore toggle

bindsym $altgr+j exec i3wsmgr-msg subws switch 0
bindsym $altgr+k exec i3wsmgr-msg subws switch 1
bindsym $altgr+l exec i3wsmgr-msg subws switch 2

bindsym $altgr+shift+j exec i3wsmgr-msg subws move 0
bindsym $altgr+shift+k exec i3wsmgr-msg subws move 1
bindsym $altgr+shift+l exec i3wsmgr-msg subws move 2
# Group control (activation, clear...)
mode "groupctl" {
  # group activation
  bindsym a exec i3wsmgr-msg group activate a; mode "default"
  bindsym b exec i3wsmgr-msg group activate b; mode "default"
  bindsym c exec i3wsmgr-msg group activate c; mode "default"
  bindsym d exec i3wsmgr-msg group activate d; mode "default"
  bindsym e exec i3wsmgr-msg group activate e; mode "default"
  bindsym f exec i3wsmgr-msg group activate f; mode "default"
  bindsym g exec i3wsmgr-msg group activate g; mode "default"
  bindsym h exec i3wsmgr-msg group activate h; mode "default"
  bindsym i exec i3wsmgr-msg group activate i; mode "default"
  bindsym j exec i3wsmgr-msg group activate j; mode "default"
  bindsym k exec i3wsmgr-msg group activate k; mode "default"
  bindsym l exec i3wsmgr-msg group activate l; mode "default"
  bindsym m exec i3wsmgr-msg group activate m; mode "default"
  bindsym n exec i3wsmgr-msg group activate n; mode "default"
  bindsym o exec i3wsmgr-msg group activate o; mode "default"
  bindsym p exec i3wsmgr-msg group activate p; mode "default"
  bindsym q exec i3wsmgr-msg group activate q; mode "default"
  bindsym r exec i3wsmgr-msg group activate r; mode "default"
  bindsym s exec i3wsmgr-msg group activate s; mode "default"
  bindsym t exec i3wsmgr-msg group activate t; mode "default"
  bindsym u exec i3wsmgr-msg group activate u; mode "default"
  bindsym v exec i3wsmgr-msg group activate v; mode "default"
  bindsym w exec i3wsmgr-msg group activate w; mode "default"
  bindsym x exec i3wsmgr-msg group activate x; mode "default"
  bindsym y exec i3wsmgr-msg group activate y; mode "default"
  bindsym z exec i3wsmgr-msg group activate z; mode "default"

  # Clear the active group from all workspaces
  bindsym Delete       exec i3wsmgr-msg group clear active; mode "default"
  # Clear all groups from all workspaces
  bindsym Shift+Delete exec i3wsmgr-msg group clear all;    mode "default"

  bindsym Escape mode "default"
  bindsym $mod+g mode "default"
}
bindsym $mod+g mode "groupctl"
bindsym $altgr+g exec i3wsmgr-msg group toggle
bindsym $altgr+n exec i3wsmgr-msg group switch rel left
bindsym $altgr+m exec i3wsmgr-msg group switch rel right

#	|-----------------------|
#	|		Workspaces		|
#	|-----------------------|

assign [class="firefox"] → number 10:$2
assign [class="brave"] → number 10:$2
assign [class="SimpleScreenRecorder"] → number 20:$3
assign [class="kdenlive"] → number 20:$3
assign [class="mpv"] → number 20:$3
assign [class="Gimp"] → number 20:$3
assign [class="Signal"] → number 30:$4
assign [class="discord"] → number 30:$4a
assign [class="Element"] → number 30:$4
assign [class="Steam" instance="Steam"] → number 40:$5
assign [class="VirtualBox*"] → number 60:$7

#	|-----------------------|
#	|		Plasma			|
#	|-----------------------|

# Plasma compatibility improvements
for_window [window_role="pop-up"] floating enable
for_window [window_role="task_dialog"] floating enable
for_window [class="plasmashell"] floating disable;
no_focus [class="plasmashell" window_type="notification"]
for_window [title="Desktop — Plasma"] kill; floating enable; border none

#	|-----------------------|
#	|		Resize			|
#	|-----------------------|

mode "resize" {
	bindsym Right resize grow width 5 px or 5 ppt
	bindsym Left resize shrink width 5 px or 5 ppt
	bindsym Up resize grow height 5 px or 5 ppt
	bindsym Down resize shrink height 5 px or 5 ppt

	bindsym Return mode "default"
	bindsym Escape mode "default"
	bindsym $mod+r mode "default"
}
bindsym $mod+r mode "resize"


#	|-----------------------|
#	|		Hotkeys			|
#	|-----------------------|

#	Terminal
set $TERMINAL kitty
bindsym $mod+Return exec kitty
bindsym $mod+Escape exec kitty
bindsym $alt+Return exec xfce4-terminal

#	Switch kb layout
bindsym $mod+space exec "/home/$USER/Developer/.scripts/keymap.sh"

#	Lock
bindsym $mod+l exec i3lock -i ~/Wallpapers/lock.png -c 000000

#	Screenshot
bindsym $mod+shift+p exec xfce4-screenshooter

#	Rofi
bindsym $mod+d exec rofi -show drun -lines 23 -eh 1 -location 0 -width 644 -font "Source Code Pro Medium 10" -show-icons -theme "/usr/share/rofi/themes/spotlight.rasi"
# bindsym $mod+d exec xfce4-appfinder
bindsym $mod+shift+d exec rofi -show run -lines 0 -eh 1 -location 0 -width 644 -font "Source Code Pro Medium 10" -show-icons -theme "/usr/share/rofi/themes/spotlight.rasi"
bindsym $mod+shift+w exec rofi -show window -lines 0 -eh 1 -location 0 -width 644 -font "Source Code Pro Medium 10" -show-icons -theme "/usr/share/rofi/themes/spotlight.rasi"
bindsym $alt+shift+s exec rofi -show screenlayout -lines 0 -eh 1 -location 0 -width 644 -font "Source Code Pro Medium 10" -show-icons -theme "/usr/share/rofi/themes/spotlight.rasi" -config ~/.config/rofi/modes/screenlayout.rasi

#	Browser
bindsym $mod+shift+f exec firefox
bindsym $alt+shift+b exec brave

#	Chat
bindsym $mod+shift+s exec signal-desktop
bindsym $mod+shift+y exec element-desktop

#	GUI Applications
bindsym $mod+shift+g exec gimp
bindsym $mod+shift+a exec pcmanfm
bindsym $mod+shift+c exec code
bindsym $mod+shift+x exec steam

#	|-----------------------|
#	|		Autostart		|
#	|-----------------------|

#	Picom
exec_always picom --config ~/.config/picom/picom.conf

#	Polybar
exec_always --no-startup-id "sh /home/$USER/.config/polybar/launch.sh"	

exec_always --no-startup-id "sh /home/$USER/Developer/.scripts/synergy.sh"

#	Init
exec kitty "/home/$USER/Developer/.scripts/boot.sh"

exec_always "killall i3wsmgr; i3wsmgr | systemd-cat -t i3wsmgr"
exec_always "~/Developer/.scripts/keymod.sh"
exec_always "xmodmap /etc/xmodmap.conf"
